import{d as M,e as f,u as L,c as p,a as o,b as n,w as c,g as r,t as g,h as w,i as V,T as $,F as h,o as m,j as N,k as v,l as S,_ as U}from"./index-0X35NQjJ.js";import{v as j,Y as H,b as y,u as Y,s as E,t as O,c as R,i as q}from"./collectedmarker-Ns-HdvGF.js";import{u as A}from"./index-CLYGAW6q.js";const G={class:"fixed top-0 right-0 w-full h-screen z-[0]"},I={key:0},J={key:1},K={class:"fixed top-0 right-0"},P={class:"flex items-center justify-center"},Q=M({__name:"Map",props:{markerCoords:{},markerCoordsModifiers:{}},emits:["update:markerCoords"],setup(b){const i=f(16),x=f([13.771513,460.586636]),a=L(b,"markerCoords"),d=f(!1),u=f(!1),z=()=>{d.value=!d.value},D=()=>{u.value=!u.value},T=l=>{var t,e;(t=a.value)==null||t.push({coord:l,lasttime:0,temporary:d.value}),a.value=(e=a.value)==null?void 0:e.map(s=>s)},B=l=>{var t;a.value=(t=a.value)==null?void 0:t.filter(e=>e.coord[0]!=l[0]||e.coord[1]!=l[1]||!(e.temporary||u.value))},F=l=>{u.value&&T([l.latlng.lat,l.latlng.lng])},k=(l,t)=>{var C;console.log(l.target._latlng);const e=[l.target._latlng.lat,l.target._latlng.lng];let s=(C=a.value)==null?void 0:C.find(_=>_.coord[0]==e[0]&&_.coord[1]==e[1]);s&&!s.temporary&&!u.value&&Math.floor(Date.now()/864e5)-Math.floor(s.lasttime/86400)>0?s.lasttime=Date.now()/1e3:B(e)};return(l,t)=>(m(),p(h,null,[o("div",G,[n(r(q),{ref:"map",zoom:i.value,"onUpdate:zoom":t[0]||(t[0]=e=>i.value=e),center:x.value,"onUpdate:center":t[1]||(t[1]=e=>x.value=e),onClick:F,"use-global-leaflet":!1},{default:c(()=>[n(r(j),{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png","layer-type":"base",name:"OpenStreetMap"}),(m(!0),p(h,null,N(a.value,e=>(m(),p("div",null,[e.temporary?(m(),p("div",I,[n(r(H),{"lat-lng":e.coord,class:"pointer-events-none",onClick:s=>k(s,e),color:"red",radius:2/18e3*Math.pow(2,i.value)},{default:c(()=>[t[4]||(t[4]=v(" > ")),n(r(y),{class:"pointer-events-none"},{default:c(()=>[t[2]||(t[2]=v(" trash ")),t[3]||(t[3]=o("br",null,null,-1)),v(" Last Collection: "+g(((Date.now()/1e3-e.lasttime)/3600).toFixed(2))+" Hrs ",1)]),_:2},1024)]),_:2},1032,["lat-lng","onClick","radius"])])):(m(),p("div",J,[n(r(Y),{"lat-lng":e.coord,class:"pointer-events-none",onClick:s=>k(s,e)},{default:c(()=>[n(r(E),{"icon-url":Math.floor(Date.now()/864e5)-Math.floor(e.lasttime/86400)>0?r(O):r(R),"icon-size":[60,60]},null,8,["icon-url"]),n(r(y),{class:"pointer-events-none"},{default:c(()=>[t[5]||(t[5]=v(" trash ")),t[6]||(t[6]=o("br",null,null,-1)),v(" Last Collection: "+g(((Date.now()/1e3-e.lasttime)/3600).toFixed(2))+" Hrs ",1)]),_:2},1024)]),_:2},1032,["lat-lng","onClick"])]))]))),256))]),_:1},8,["zoom","center"])]),o("div",K,g(x.value)+" "+g(i.value),1),o("button",{onClick:z,class:w(["fixed z-120 bottom-4 left-4 px-4 py-2 bg-slate-400 text-white rounded",d.value?"bg-slate-600":""])}," ! ",2),(m(),V($,{defer:"",to:"#above"},[o("div",P,[o("button",{onClick:D,class:w(["px-10 py-6 bg-blue-500 rounded-xl text-4xl font-bold text-center text-black bg-slate-400",u.value?"bg-slate-600":""])}," + ",2)])]))],64))}}),W={class:"overflow-hidden relative w-full h-screen bg-slate-200",role:"region","aria-label":"Map Two Container"},X={class:"absolute"},ae=M({__name:"MapView",props:{title:{}},setup(b){const i=A("markers",[{coord:[13.770002456596833,460.5888676643372],lasttime:Date.now()/1e3,temporary:!1}]);return(x,a)=>(m(),p("div",W,[n(Q,{markerCoords:r(i),"onUpdate:markerCoords":a[0]||(a[0]=d=>S(i)?i.value=d:null)},null,8,["markerCoords"]),o("div",X,[n(U)]),a[1]||(a[1]=o("div",{class:"absolute bottom-[60px] right-[52px] max-md:right-10 max-md:bottom-10 max-sm:right-5 max-sm:bottom-5 flex flex-col gap-10",role:"heading","aria-level":"1",tabindex:"0"},[o("div",{id:"above"}),o("div",{class:"px-16 pt-24 pb-20 text-4xl font-bold text-center text-black bg-slate-400 min-w-[266px] rounded-[40px] max-md:px-10 max-md:py-16 max-md:text-3xl max-sm:px-8 max-sm:py-10 max-sm:text-2xl max-sm:min-w-[200px]",role:"heading","aria-level":"1",tabindex:"0"}," Map 2 ")],-1))]))}});export{ae as default};
