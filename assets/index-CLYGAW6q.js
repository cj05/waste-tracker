import{v as H,z as J,e as z,J as I,B as W,K,L as R,M as B,N as $,f as L,O as h,g as q}from"./index-0X35NQjJ.js";function Q(e){return R()?(B(e),!0):!1}const U=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const X=Object.prototype.toString,Y=e=>X.call(e)==="[object Object]";function Z(e,n){function t(...o){return new Promise((a,f)=>{Promise.resolve(e(()=>n.apply(this,o),{fn:n,thisArg:this,args:o})).then(a).catch(f)})}return t}const V=e=>e();function ee(e=V){const n=z(!0);function t(){n.value=!1}function o(){n.value=!0}const a=(...f)=>{n.value&&e(...f)};return{isActive:I(n),pause:t,resume:o,eventFilter:a}}function te(e){return K()}function C(e){return Array.isArray(e)?e:[e]}function ne(e,n,t={}){const{eventFilter:o=V,...a}=t;return W(e,Z(o,n),a)}function re(e,n,t={}){const{eventFilter:o,...a}=t,{eventFilter:f,pause:S,resume:i,isActive:u}=ee(o);return{stop:ne(e,n,{...a,eventFilter:f}),pause:S,resume:i,isActive:u}}function ie(e,n=!0,t){te()?H(e,t):n?e():J(e)}function oe(e,n,t){return W(e,n,{...t,immediate:!0})}const N=U?window:void 0;function ue(e){var n;const t=h(e);return(n=t==null?void 0:t.$el)!=null?n:t}function k(...e){const n=[],t=()=>{n.forEach(i=>i()),n.length=0},o=(i,u,l,d)=>(i.addEventListener(u,l,d),()=>i.removeEventListener(u,l,d)),a=L(()=>{const i=C(h(e[0])).filter(u=>u!=null);return i.every(u=>typeof u!="string")?i:void 0}),f=oe(()=>{var i,u;return[(u=(i=a.value)==null?void 0:i.map(l=>ue(l)))!=null?u:[N].filter(l=>l!=null),C(h(a.value?e[1]:e[0])),C(q(a.value?e[2]:e[1])),h(a.value?e[3]:e[2])]},([i,u,l,d])=>{if(t(),!(i!=null&&i.length)||!(u!=null&&u.length)||!(l!=null&&l.length))return;const y=Y(d)?{...d}:d;n.push(...i.flatMap(F=>u.flatMap(w=>l.map(O=>o(F,w,O,y)))))},{flush:"post"}),S=()=>{f(),t()};return Q(t),S}const A=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},E="__vueuse_ssr_handlers__",ae=le();function le(){return E in A||(A[E]=A[E]||{}),A[E]}function se(e,n){return ae[e]||n}function ce(e){return e==null?"any":e instanceof Set?"set":e instanceof Map?"map":e instanceof Date?"date":typeof e=="boolean"?"boolean":typeof e=="string"?"string":typeof e=="object"?"object":Number.isNaN(e)?"any":"number"}const fe={boolean:{read:e=>e==="true",write:e=>String(e)},object:{read:e=>JSON.parse(e),write:e=>JSON.stringify(e)},number:{read:e=>Number.parseFloat(e),write:e=>String(e)},any:{read:e=>e,write:e=>String(e)},string:{read:e=>e,write:e=>String(e)},map:{read:e=>new Map(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e.entries()))},set:{read:e=>new Set(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e))},date:{read:e=>new Date(e),write:e=>e.toISOString()}},D="vueuse-storage";function de(e,n,t,o={}){var a;const{flush:f="pre",deep:S=!0,listenToStorageChanges:i=!0,writeDefaults:u=!0,mergeDefaults:l=!1,shallow:d,window:y=N,eventFilter:F,onError:w=r=>{console.error(r)},initOnMounted:O}=o,m=(d?$:z)(typeof n=="function"?n():n),p=L(()=>h(e));if(!t)try{t=se("getDefaultStorage",()=>{var r;return(r=N)==null?void 0:r.localStorage})()}catch(r){w(r)}if(!t)return m;const g=h(n),j=ce(g),v=(a=o.serializer)!=null?a:fe[j],{pause:P,resume:M}=re(m,()=>_(m.value),{flush:f,deep:S,eventFilter:F});W(p,()=>b(),{flush:f}),y&&i&&ie(()=>{t instanceof Storage?k(y,"storage",b,{passive:!0}):k(y,D,G),O&&b()}),O||b();function T(r,s){if(y){const c={key:p.value,oldValue:r,newValue:s,storageArea:t};y.dispatchEvent(t instanceof Storage?new StorageEvent("storage",c):new CustomEvent(D,{detail:c}))}}function _(r){try{const s=t.getItem(p.value);if(r==null)T(s,null),t.removeItem(p.value);else{const c=v.write(r);s!==c&&(t.setItem(p.value,c),T(s,c))}}catch(s){w(s)}}function x(r){const s=r?r.newValue:t.getItem(p.value);if(s==null)return u&&g!=null&&t.setItem(p.value,v.write(g)),g;if(!r&&l){const c=v.read(s);return typeof l=="function"?l(c,g):j==="object"&&!Array.isArray(c)?{...g,...c}:c}else return typeof s!="string"?s:v.read(s)}function b(r){if(!(r&&r.storageArea!==t)){if(r&&r.key==null){m.value=g;return}if(!(r&&r.key!==p.value)){P();try{(r==null?void 0:r.newValue)!==v.write(m.value)&&(m.value=x(r))}catch(s){w(s)}finally{r?J(M):M()}}}}function G(r){b(r.detail)}return m}function ye(e,n,t={}){const{window:o=N}=t;return de(e,n,o==null?void 0:o.localStorage,t)}export{ye as u};
